"use client";

import { useCallback } from "react";
import { useAdminSettings } from "@/lib/admin-settings";
import type { Locale, ThemeMode } from "@/lib/admin-settings";

type TranslationParams = Record<string, string | number | undefined | null>;

const EN_TRANSLATIONS: Record<string, string> = {
  "Ayarlar": "Settings",
  "Yönetim": "Admin",
  "Oturum": "Session",
  "API anahtarı": "API key",
  "Bağlı değil": "Not connected",
  "Platform": "Platform",
  "Kiracı": "Tenant",
  "Kiracı seç": "Select tenant",
  "Kullanıcı oturumu aktif": "User session active",
  "API anahtarı yüklü": "API key loaded",
  "Kullanıcı": "User",
  "Mod": "Mode",
  "Rol": "Role",
  "Kontrol paneli": "Control panel",
  "Menü": "Menu",
  "Kısıtlı": "Restricted",
  "Gösterge Paneli": "Dashboard",
  "Analitik": "Analytics",
  "Arama Ayarları": "Search Tuning",
  "Arama Önizleme": "Search Preview",
  "Aktarımlar": "Imports",
  "Kullanıcılar": "Users",
  "API Anahtarları": "API Keys",
  "İzinli Originler": "Allowed Origins",
  "Denetim Kayıtları": "Audit Logs",
  "Kiracılar": "Tenants",
  "Panel": "Panel",
  "Arama": "Search",
  "Aktarım": "Import",
  "Anahtarlar": "Keys",
  "Denetim": "Audit",
  "Türkçe": "Turkish",
  "English": "English",
  "Açık": "Light",
  "Koyu": "Dark",
  "Tema": "Theme",
  "Test ediliyor...": "Testing...",
  "Yükleniyor...": "Loading...",
  "Yenileniyor...": "Refreshing...",
  "Aranıyor...": "Searching...",
  "Kaldır": "Remove",
  "Kaydet": "Save",
  "Yenile": "Refresh",
  "Satır ekle": "Add row",
  "Filtreleri temizle": "Clear filters",
  "Filtreleri uygula": "Apply filters",
  "Salt okuma": "Read-only",
  "Sahip": "Owner",
  "Yönetici": "Admin",
  "Görüntüleyici": "Viewer",
  "Tamamlandı": "Completed",
  "Hata": "Failed",
  "İşleniyor": "Processing",
  "Çalışıyor": "Running",
  "Kuyrukta": "Queued",
  "Bilinmiyor": "Unknown",
  "Aktif": "Active",
  "İptal edildi": "Revoked",
  "Devre dışı": "Disabled",
  "Askıya alındı": "Suspended",
  "Admin API'yi bağlayın": "Connect the Admin API",
  "Kiracı bağlamı eksik": "Tenant context missing",
  "Sağlık sinyalleri ve son aktarım hareketleri.": "Health signals and recent ingestion activity.",
  "Kiracı verilerini yüklemek için Ayarlar'da Admin API URL ve anahtarını girin.": "Enter the Admin API URL and key in Settings to load tenant data.",
  "İşleri, originleri ve API anahtarlarını yüklemek için kiracı id belirleyin.": "Set a tenant id to load jobs, origins, and API keys.",
  "Son işler": "Recent jobs",
  "Aktif anahtarlar": "Active keys",
  "CORS origin sayısı": "CORS origin count",
  "Akış": "Flow",
  "Son aktarım işleri": "Recent ingestion jobs",
  "Henüz aktarım işi yok. İndekslemek için CSV veya JSON yükleyin.": "No ingestion jobs yet. Upload CSV or JSON to index data.",
  "İşlenen": "Processed",
  "Hatalı": "Failed",
  "Sorgu talebi, sonuçsuz aramalar ve tıklama oranını izleyin.": "Track query demand, zero-result searches, and click-through rate.",
  "Son 24 saat": "Last 24 hours",
  "Son 7 gün": "Last 7 days",
  "Son 30 gün": "Last 30 days",
  "Sorgular": "Queries",
  "Toplam arama": "Total searches",
  "Sonuçsuz": "No results",
  "sonuçsuz arama": "no-result searches",
  "Tıklamalar": "Clicks",
  "Ürün tıklamaları": "Product clicks",
  "Tıklama içeren aramalar": "Searches with clicks",
  "Öne çıkan sorgular": "Top queries",
  "Arama talebi": "Search demand",
  "Henüz sorgu verisi yok.": "No query data yet.",
  "arama": "searches",
  "Kim neyi değiştirdi filtreleyin ve correlation id ile servisler arası izleyin.": "Filter who changed what and trace across services with correlation ids.",
  "Filtreler": "Filters",
  "Denetim sorgusu": "Audit query",
  "Kiracı id": "Tenant id",
  "Aksiyon": "Action",
  "Aktör": "Actor",
  "Korelasyon id": "Correlation id",
  "Başlangıç": "Start",
  "Bitiş": "End",
  "Limit": "Limit",
  "kayıt": "records",
  "Kayıtlar": "Records",
  "Son hareketler": "Recent activity",
  "Denetim kaydı bulunamadı.": "No audit records found.",
  "sistem": "system",
  "İçerik": "Payload",
  "ID kopyala": "Copy ID",
  "Logları aç": "Open logs",
  "Toplu JSON veya CSV payloadlarını aktarım akışına gönderin.": "Send bulk JSON or CSV payloads to the ingestion pipeline.",
  "İşleri yenile": "Refresh jobs",
  "Geçersiz JSON içeriği.": "Invalid JSON content.",
  "CSV içeriği boş.": "CSV content is empty.",
  "İş kuyruğa alındı: {jobId} ({count} doküman)": "Job queued: {jobId} ({count} documents)",
  "İş kuyruğa alındı: {jobId} ({count} satır)": "Job queued: {jobId} ({count} rows)",
  "Aktarım göndermek için API anahtarını ekleyin.": "Add an API key to send ingestions.",
  "Aktarım işleri için kiracı id belirleyin.": "Set a tenant id for ingestion jobs.",
  "Görüntüleyici rol: aktarım kapalı.": "Viewer role: ingestions disabled.",
  "JSON": "JSON",
  "Toplu yükleme": "Bulk upload",
  "JSON aktarımı kuyruğa al": "Queue JSON import",
  "CSV": "CSV",
  "CSV aktarımı": "CSV import",
  "CSV yapıştırın veya yükleyin": "Paste or upload CSV",
  "CSV aktarımı kuyruğa al": "Queue CSV import",
  "İşler": "Jobs",
  "Henüz aktarım işi yok.": "No ingestion jobs yet.",
  "Kiracı ekip üyelerini ve rolleri yönetin.": "Manage tenant team members and roles.",
  "Kullanıcıları yüklemek için API anahtarı ekleyin veya giriş yapın.": "Add an API key or sign in to load users.",
  "Kiracı kullanıcılarını yönetmek için kiracı id belirleyin.": "Set a tenant id to manage tenant users.",
  "Oluştur": "Create",
  "Yeni kullanıcı ekle": "Add new user",
  "E-posta": "Email",
  "Ad": "Name",
  "Geçici şifre": "Temporary password",
  "Kullanıcı oluştur": "Create user",
  "Kaydediliyor...": "Saving...",
  "Ekip": "Team",
  "Mevcut kullanıcılar": "Current users",
  "{count} kullanıcı": "{count} users",
  "Kullanıcı bulunamadı.": "No users found.",
  "Son giriş: {value}": "Last login: {value}",
  "Hiç": "Never",
  "Yeni şifre": "New password",
  "Kullanıcı oluşturuldu.": "User created.",
  "Kullanıcı güncellendi.": "User updated.",
  "Arama API anahtarı gerekli": "Search API key required",
  "Arama önizlemesi için Ayarlar'da kiracı API anahtarı girin.": "Enter a tenant API key in Settings to use search preview.",
  "Arama sonuçlarını görmek için kiracı id belirleyin.": "Set a tenant id to view search results.",
  "Gerçek kiracı verileriyle alaka, facet ve arama davranışını doğrulayın.": "Validate relevance, facets, and search behavior with real tenant data.",
  "Aramayı çalıştır": "Run search",
  "Sorgu": "Query",
  "Canlı arama": "Live search",
  "Kiracı: {tenant} | {url}": "Tenant: {tenant} | {url}",
  "Örn: koşu ayakkabısı, kırmızı elbise, pamuklu tişört...": "e.g., running shoes, red dress, cotton t-shirt...",
  "Ara": "Search",
  "Fasetler": "Facets",
  "Marka": "Brand",
  "Marka yok": "No brands",
  "Kategori": "Category",
  "Kategori yok": "No categories",
  "Fiyat aralığı": "Price range",
  "Fiyat aralığı yok": "No price ranges",
  "Sadece stokta": "In stock only",
  "Sonuçlar": "Results",
  "Eşleşen ürünler": "Matching products",
  "Henüz sonuç yok. Daha uzun bir sorgu deneyin veya filtreleri değiştirin.": "No results yet. Try a longer query or adjust filters.",
  "Kategorisiz": "Uncategorized",
  "Stokta": "In stock",
  "Stokta yok": "Out of stock",
  "Kiracı entegrasyonları için API anahtarları oluşturun veya iptal edin.": "Create or revoke API keys for tenant integrations.",
  "Kiracı kimlik bilgilerini yönetmek için API anahtarı ekleyin.": "Add an API key to manage tenant credentials.",
  "API anahtarlarını listelemek veya oluşturmak için kiracı id belirleyin.": "Set a tenant id to list or create API keys.",
  "Oluşturulan anahtarlar": "Issued keys",
  "Henüz API anahtarı yok.": "No API keys yet.",
  "İptal et": "Revoke",
  "Görüntüleyici rol: anahtar yönetimi kapalı.": "Viewer role: key management disabled.",
  "Yeni API anahtarı": "New API key",
  "Anahtarlar yalnızca oluşturulduğunda bir kez gösterilir.": "Keys are shown only once when created.",
  "Açıklama": "Description",
  "Katalog senkron": "Catalog sync",
  "Aktarım işleri tarafından kullanılır": "Used by ingestion jobs",
  "Anahtar oluştur": "Create key",
  "Anahtar oluşturuldu": "Key created",
  "Panoya kopyala": "Copy to clipboard",
  "Ad gerekli.": "Name is required.",
  "Arama widget'ını çağırabilecek domainleri yönetin.": "Manage domains that can call the search widget.",
  "İzinli originleri yönetmek için API anahtarını ekleyin.": "Add an API key to manage allowed origins.",
  "İzinli originleri güncellemek için kiracı id belirleyin.": "Set a tenant id to update allowed origins.",
  "CORS": "CORS",
  "Domain izin listesi": "Allowed domain list",
  "Görüntüleyici rol: origin güncellemesi kapalı.": "Viewer role: origin updates disabled.",
  "Origin ekle": "Add origin",
  "Değişiklikleri kaydet": "Save changes",
  "Origin listesi güncellendi.": "Origin list updated.",
  "Henüz origin yok.": "No origins yet.",
  "Kiracıları yönetin ve hesap hiyerarşisini planlayın.": "Manage tenants and plan account hierarchy.",
  "Kiracıları listelemek veya oluşturmak için API anahtarı ekleyin.": "Add an API key to list or create tenants.",
  "Platform moduna geçin": "Switch to platform mode",
  "Kiracı yönetmek için platform API anahtarı ve Platform modu seçin.": "Select Platform mode and a platform API key to manage tenants.",
  "Dizin": "Directory",
  "Kiracı listesi": "Tenant list",
  "Henüz kiracı yok.": "No tenants yet.",
  "Yeni kiracı": "New tenant",
  "Platform anahtarı gerekir. Kiracı id benzersiz olmalı.": "Platform key required. Tenant id must be unique.",
  "Görüntüleyici rol: kiracı oluşturma kapalı.": "Viewer role: tenant creation disabled.",
  "Kiracı oluştur": "Create tenant",
  "Kiracı oluşturuldu.": "Tenant created.",
  "Kiracı id ve ad gerekli.": "Tenant id and name are required.",
  "Demo Mağaza": "Demo Store",
  "Admin API'ye bağlanın ve kimlik doğrulama modunu seçin.": "Connect to the Admin API and choose an auth mode.",
  "Bağlantıyı test et": "Test connection",
  "Ayarlar kaydedildi.": "Settings saved.",
  "Sağlık kontrolü başarısız.": "Health check failed.",
  "Admin API erişilebilir.": "Admin API is reachable.",
  "Giriş başarısız.": "Sign-in failed.",
  "Bağlantı": "Connection",
  "Admin API ayarları": "Admin API settings",
  "Admin API URL": "Admin API URL",
  "anahtarı yapıştır": "paste key",
  "Gözlemlenebilirlik URL": "Observability URL",
  "Görünüm": "Appearance",
  "Dil ve tema": "Language & theme",
  "Arayüz tercihleriniz tarayıcıda saklanır.": "Your UI preferences are stored in this browser.",
  "Dil": "Language",
  "Yeni kiracı oluşturmak için platform modu gerekir. Kiracı modu, işlemleri seçilen kiracıyla sınırlar. Rol seçimi, yalnızca kullanıcı oturumu yokken arayüz kısıtlarını etkiler.": "Platform mode is required to create new tenants. Tenant mode scopes actions to the selected tenant. Role selection only affects UI gating when there is no user session.",
  "Kullanıcı girişi": "User sign-in",
  "Kendi kataloğunuzu yönetmek için kiracı kullanıcısı ile giriş yapın.": "Sign in with a tenant user to manage your catalog.",
  "Oturumu temizle": "Clear session",
  "Giriş yapıldı": "Signed in",
  "Giriş yap": "Sign in",
  "Giriş yapılıyor...": "Signing in...",
  "Giriş başarılı.": "Sign-in successful.",
  "Oturum temizlendi.": "Session cleared.",
  "Kiracı, e-posta ve şifre gerekli.": "Tenant, email, and password are required.",
  "Şifre": "Password",
  "Giriş, Admin API /auth/login ile JWT üretir.": "Login issues a JWT via Admin API /auth/login.",
  "Arama API ayarları": "Search API settings",
  "Arama önizlemesinde kullanılacak kiracı API anahtarını ayarlayın.": "Set the tenant API key used for search preview.",
  "Arama API URL": "Search API URL",
  "Arama API anahtarı": "Search API key",
  "kiracı api anahtarı": "tenant api key",
  "Kiracı kısayolları": "Tenant shortcuts",
  "Ortamlar arasında hızlı geçiş için kiracı id'lerini kaydedin.": "Save tenant ids for quick switching between environments.",
  "Kiracıları senkronize et": "Sync tenants",
  "Senkronize ediliyor...": "Syncing...",
  "kiracı id": "tenant id",
  "Kısayol ekle": "Add shortcut",
  "Henüz kiracı kısayolu yok.": "No tenant shortcuts yet.",
  "Kiracı kısayolu eklendi. Uygulamak için Kaydet'e basın.": "Tenant shortcut added. Click Save to apply.",
  "Kiracı listesi senkronize edildi. Uygulamak için Kaydet'e basın.": "Tenant list synced. Click Save to apply.",
  "Platform modu ve API anahtarı gerekli.": "Platform mode and API key are required.",
  "Arama ayarlarını yönetmek için API anahtarını ekleyin.": "Add an API key to manage search tuning.",
  "Arama ayarlarını yönetmek için kiracı id belirleyin.": "Set a tenant id to manage search tuning.",
  "Kiracı araması için eşanlamlı, boost ve pinli sonuçları yönetin.": "Manage synonyms, boosts, and pinned results for tenant search.",
  "Görüntüleyici rol: ayar güncellemeleri kapalı.": "Viewer role: tuning updates disabled.",
  "Eşanlamlılar güncellendi.": "Synonyms updated.",
  "Boost kuralları güncellendi.": "Boost rules updated.",
  "Pinli sonuçlar güncellendi.": "Pinned results updated.",
  "Eşanlamlılar": "Synonyms",
  "Terim genişletme": "Term expansion",
  "Eşanlamlıları kaydet": "Save synonyms",
  "Henüz eşanlamlı tanımı yok.": "No synonyms yet.",
  "ayakkabı": "shoe",
  "sneaker, spor ayakkabı": "sneaker, athletic shoe",
  "Boostlar": "Boosts",
  "Öne çıkarma kuralları": "Boost rules",
  "Boostları kaydet": "Save boosts",
  "Henüz boost tanımı yok.": "No boost rules yet.",
  "Acme": "Acme",
  "Pinli sonuçlar": "Pinned results",
  "Üst sonuçları garanti edin": "Guarantee top results",
  "Pinleri kaydet": "Save pins",
  "Henüz pinli sonuç yok.": "No pinned results yet.",
  "yaz elbisesi": "summer dress",
  "urun-123, urun-456": "product-123, product-456",
  "Analitik verileri yüklemek için API anahtarını ekleyin.": "Add an API key to load analytics.",
  "Analitiği görüntülemek için kiracı id belirleyin.": "Set a tenant id to view analytics.",
  "Denetim kayıtlarını yüklemek için API anahtarını ekleyin.": "Add an API key to load audit logs.",
  "Denetim kayıtlarını yüklemek için kiracı id belirleyin.": "Set a tenant id to load audit logs.",
  "Kiracı id gerekli.": "Tenant id is required.",
  "Platform paneli": "Platform panel",
  "Tenant paneli": "Tenant panel",
  "Platform paneline geç": "Switch to platform panel",
  "Tenant paneline geç": "Switch to tenant panel",
  "Platform anahtarı": "Platform key",
  "Platform anahtarı yüklü": "Platform key loaded",
  "Platform girişi gerekli": "Platform login required",
  "Kiracı girişi gerekli": "Tenant login required",
  "Süper admin paneline erişmek için platform API anahtarınızı girin.": "Enter your platform API key to access the super admin panel.",
  "Kiracı paneline erişmek için kullanıcı girişi yapın veya API anahtarı ekleyin.": "Sign in or add an API key to access the tenant panel.",
  "Panel seç": "Choose panel",
  "Kiracı girişi": "Tenant login",
  "Tenant paneli için kullanıcı hesabı veya API anahtarı ile giriş yapın.": "Sign in with a user account or API key for the tenant panel.",
  "Admin API": "Admin API",
  "Mevcut oturum": "Current session",
  "Giriş aktif": "Session active",
  "Kiracı erişimi aktif.": "Tenant access active.",
  "Panele git": "Go to panel",
  "Kimlik doğrulama yöntemi": "Authentication method",
  "API anahtarı ile devam": "Continue with API key",
  "API anahtarı ile giriş, yetkilendirme için X-Api-Key kullanır.": "API key sign-in uses X-Api-Key for authorization.",
  "Kiracı id ve API anahtarı gerekli.": "Tenant id and API key are required.",
  "API anahtarı kaydedildi.": "API key saved.",
  "Giriş sayfası": "Login page",
  "Kullanıcı girişi ile rol ve tenant bağlamı otomatik atanır.": "User login assigns role and tenant context automatically.",
  "Tenant paneli bağlantı ve oturum ayarları.": "Tenant panel connection and session settings.",
  "Tenant girişi": "Tenant sign-in",
  "Oturum yok. Tenant paneli için giriş yapın veya API anahtarı ekleyin.": "No session. Sign in or add an API key for the tenant panel.",
  "Platform paneli için bağlantı ve görünüm ayarları.": "Connection and appearance settings for the platform panel.",
  "Platform API ayarları": "Platform API settings",
  "Platform API anahtarı": "Platform API key",
  "Platform girişi": "Platform login",
  "Süper admin paneli için platform API anahtarınızı doğrulayın.": "Verify your platform API key for the super admin panel.",
  "Platforma giriş yap": "Sign in to platform",
  "Platform anahtarı kaydedildi.": "Platform key saved.",
  "Platform API anahtarı gerekli.": "Platform API key required",
  "Platform API anahtarı gerekli": "Platform API key required",
  "Platform paneline erişmek için API anahtarınızı girin.": "Enter your API key to access the platform panel.",
  "Platform özeti": "Platform overview",
  "Kiracıları, durumlarını ve sistem genelindeki hareketleri izleyin.": "Monitor tenants, their status, and system-wide activity.",
  "Kiracıları yönet": "Manage tenants",
  "Toplam tenant": "Total tenants",
  "Aktif tenant": "Active tenants",
  "Denetim kayıtları hazır": "Audit logs ready",
  "Son eklenenler": "Recently added",
  "Canlı": "Live",
  "Durum": "Status",
  "Giriş": "Sign in",
  "Originler": "Origins",
  "Özet": "Overview"
};

export function useI18n() {
  const { settings, updateSettings } = useAdminSettings();
  const locale = (settings.locale ?? "tr") as Locale;
  const theme = (settings.theme ?? "light") as ThemeMode;

  const t = useCallback(
    (key: string, params?: TranslationParams) => {
      const template =
        locale === "tr" ? key : EN_TRANSLATIONS[key] ?? key;

      if (!params) {
        return template;
      }

      return template.replace(/\{(\w+)\}/g, (match, name) => {
        const value = params[name];
        return value === undefined || value === null ? match : String(value);
      });
    },
    [locale]
  );

  const setLocale = (next: Locale) => updateSettings({ locale: next });
  const setTheme = (next: ThemeMode) => updateSettings({ theme: next });

  return {
    t,
    locale,
    setLocale,
    theme,
    setTheme,
  };
}
